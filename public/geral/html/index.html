<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
    <title>Rifa 913A</title>
</head>

<body>
    <div id="central-box" class="central-box">
        <div id="div-logo-top">
            <img src="../../images/913.svg" alt="913A">
        </div>
        <div id="div-title">
            <h1>Rifa Solidária n°1</h1>
            <p>Em prol da formatura do 3° ano do curso de Desenvolvimento de Sistemas da manhã (913A) do Instituto
                Federal de Alagoas (IFAL)</p>
        </div>
        <div id="number-grid" class="dynamic-grid">
            <!-- Grid de números -->
        </div>
        <img src="../../images/pc.png" alt="pc" id="pc">
    </div>

    <script>
        const grid = document.getElementById('number-grid');

        // Função para carregar os números da API
        async function loadNumbers() {
            try {
                const response = await fetch('http://localhost:3000/numbers'); // A URL do seu backend
                const numbersList = await response.json();

                // Adiciona os números à grid
                numbersList.forEach(number => {
                    const numberDiv = document.createElement('div');
                    numberDiv.classList.add('number');
                    numberDiv.classList.add(`number-${number.id}`); // Usando o ID do número
                    numberDiv.id = `number-${number.id}`;
                    numberDiv.textContent = number.number; // Mostra o número

                    // Verifica se o buyerId é diferente de null e aplica a classe correspondente
                    if (number.buyerId !== null) {
                        numberDiv.classList.add('buyer-assigned');
                    } else {
                        numberDiv.classList.add('unassigned');
                    }

                    grid.appendChild(numberDiv);
                });
            } catch (error) {
                console.error('Erro ao carregar os números:', error);
            }
        }

        // Carregar os números assim que a página carregar
        loadNumbers();

    </script>
</body>

</html>